#!/usr/bin/env node
var argv = require('yargs')
    .usage('Usage: $0 -p [project]')
    .demand(['p'])
    .argv,
    scrivenerConfig = require ('../scrivener'),
    scrivener = require('../index'),
    item = argv.p,
    type = (argv.type !== undefined) ? argv.type : false,
    projectPath = __dirname + '/../' + scrivenerConfig[item].path + '/' + item + '.scriv',
    buildPath = __dirname + '/../' + scrivenerConfig[item].compilePath + '/',
    draft = scrivener.loadDraft(projectPath, scrivenerConfig[item], type);

if (argv.dry) {
    scrivener.write(draft, scrivenerConfig[item], buildPath, true);
} else {
    scrivener.write(draft, scrivenerConfig[item], buildPath);
}
